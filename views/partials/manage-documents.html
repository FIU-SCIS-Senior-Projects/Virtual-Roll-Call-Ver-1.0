<div class='col-sm-8 text-left'> 
	<h3>Manage Documents</h3>
	<hr>

	<!-- Upload Document Panel -->
	<div class='panel panel-primary' ng-init='getCategories()'>
		<div class='panel-heading'>Upload Documents</div>
		<div class='panel-body'>
			<div>

				<!-- Upload Document Form -->
				<form action="../app/php/upload-document.php" method="post" enctype="multipart/form-data" target="dummyframe">
					<label>File <span class="glyphicon glyphicon-file"></span></label>
					<br>
					<input type="file" name='document' id='document'required>
					<br>
					<label>Document Name <span class="glyphicon glyphicon-file"></span></label>
					<br>
					<input type="text" name='document_name' required>
					<br>
					<br>
					<label>Category <span class="glyphicon glyphicon-list-alt"></span></label>
					<br>
					<select name="category_id" value='{{category.id}}' ng-options='category as category.name for category in categories track by category.id' ng-model='selected_category'>
					</select>
					<br>
					<br>
					<input type="checkbox" name='pinned' value="1">
					<label>Pin Document <span class='glyphicon glyphicon-pushpin'></span></label> 
					<input type="hidden" name="uploaded_by" value='{{name}}'>
					<br>
					<br>
					<button type='submit' class='btn btn-success'><span class="glyphicon glyphicon-upload"></span> Upload</button>
					<br>
				</form>
			</div>
		</div>
	</div>
	
	<div class='panel panel-primary' ng-init='getDocuments()'>
		<div class='panel-heading'>Edit Documents</div>

		<!-- TO DO: Overflow not detected until page reloads -->
		<div class='panel-body' style="height:350px; overflow-y:scroll">
			<div>
				<table class="table table-striped table-hover" style='margin:auto; width:100%'>
					<form class="form-inline">
						<div class="form-group">
							<!-- <label>Category</label> -->
							<!-- <select ng-options="cat.name for cat in categories" ng-model="cat_filter"> -->
							<label>Search</label>
							<input type="text" ng-model="search" class="form-control" placeholder="Search">
							</select>
						</div>
					</form>      
					<thead>
						<tr>
							<th class="text-center">#</th>
							<th ng-click="sortTable('name')">Document Name</th>
							<th ng-click="sortTable('cat_name')">Category</th>
							<th ng-click="sortTable('date')">Upload Date</th>
							<th ng-click="sortTable('pinned')">Pinned</th>
							<th ng-click="sortTable('uploadedBy')">Uploaded By</th>
							<th class="text-center">Edit</th>
						</tr>
					</thead>
					<tbody>
						<!-- <tr ng-repeat='d in documents | orderBy:orderBy |filter:cat_filter.name'> -->
						<tr ng-repeat='d in documents | orderBy:orderBy |filter:search'>
							<td class='text-center'>{{$index + 1}}</td>
							<td>{{d.name}}</td>
							<td>{{d.cat_name}}</td>
							<td>{{d.date}}</td>
							<td>{{d.pinned}}</td>
							<td>{{d.uploadedBy}}</td>
							<td class='text-center'><button class="btn-default"><span class="glyphicon glyphicon-edit"></span> Edit</button></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>	
	
	<iframe width="0" height="0" border="0" name="dummyframe" id="dummyframe" style="display:none"</iframe>
</div>